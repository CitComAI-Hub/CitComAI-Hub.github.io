
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://citcom-vrain.github.io/documentation/data_space_connectors/fiware/legacy_1.X.X/deployments/aws_deployment/">
      
      
        <link rel="prev" href="../../">
      
      
        <link rel="next" href="../local_deployment/">
      
      
      <link rel="icon" href="../../../../../../assets/logo.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.9">
    
    
      
        <title>AWS deployment - CitCom.ai | VRAIN</title>
      
    
    
      <link rel="stylesheet" href="../../../../../../assets/stylesheets/main.f2e4d321.min.css">
      
        
        <link rel="stylesheet" href="../../../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../../css/timeago.css">
    
      <link rel="stylesheet" href="../../../../../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../../../../../stylesheets/neoteroi-mkdocs.css">
    
      <link rel="stylesheet" href="../../../../../../assets/css/data_catalog.css">
    
    <script>__md_scope=new URL("../../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#aws-deployment" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../../.." title="CitCom.ai | VRAIN" class="md-header__button md-logo" aria-label="CitCom.ai | VRAIN" data-md-component="logo">
      
  <img src="../../../../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CitCom.ai | VRAIN
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              AWS deployment
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/CitCom-VRAIN/CitCom-VRAIN.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    CitCom-VRAIN/CitCom-VRAIN.github.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../../.." title="CitCom.ai | VRAIN" class="md-nav__button md-logo" aria-label="CitCom.ai | VRAIN" data-md-component="logo">
      
  <img src="../../../../../../assets/logo.png" alt="logo">

    </a>
    CitCom.ai | VRAIN
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/CitCom-VRAIN/CitCom-VRAIN.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    CitCom-VRAIN/CitCom-VRAIN.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../welcome/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.03 4.95 3.5 8.5c-3.33 3.31-3.33 8.69 0 12s8.69 3.33 12 0l6-6c1-.97 1-2.56 0-3.54-.1-.12-.23-.23-.37-.32l.37-.39c1-.97 1-2.56 0-3.54-.14-.16-.33-.3-.5-.41.38-.92.21-2.02-.54-2.77-.87-.87-2.22-.96-3.2-.28a2.517 2.517 0 0 0-3.88-.42l-2.51 2.51c-.09-.14-.2-.27-.32-.39a2.53 2.53 0 0 0-3.52 0m1.41 1.42c.2-.2.51-.2.71 0s.2.51 0 .71l-3.18 3.18a3 3 0 0 1 0 4.24l1.41 1.41a5.004 5.004 0 0 0 1.12-5.36l6.3-6.3c.2-.2.51-.2.7 0s.21.51 0 .71l-4.59 4.6 1.41 1.41 6.01-6.01c.2-.2.51-.2.71 0 .2.2.2.51 0 .71l-6.01 6.01 1.41 1.41 4.95-4.95c.2-.2.51-.2.71 0 .2.2.2.51 0 .71l-5.66 5.65 1.41 1.42 3.54-3.54c.2-.2.51-.2.71 0 .2.2.2.51 0 .71l-6 6.01c-2.54 2.54-6.65 2.54-9.19 0s-2.54-6.65 0-9.19l3.53-3.54M23 17c0 3.31-2.69 6-6 6v-1.5c2.5 0 4.5-2 4.5-4.5H23M1 7c0-3.31 2.69-6 6-6v1.5c-2.5 0-4.5 2-4.5 4.5H1Z"/></svg>
  
  <span class="md-ellipsis">
    Welcome
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../../getting_started/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2S7 4 7 12c0 3.1.76 5.75 1.67 7.83A2 2 0 0 0 10.5 21h3a2 2 0 0 0 1.83-1.17C16.25 17.75 17 15.1 17 12c0-8-5-10-5-10m1.5 17h-3c-1-2.24-1.5-4.59-1.5-7 0-4.64 1.9-6.8 3-7.67 1.1.87 3 3.03 3 7.67 0 2.41-.5 4.76-1.5 7m6.5 3-3.86-1.55c.7-1.53 1.2-3.11 1.51-4.72m-9.79 4.72L4 22l2.35-6.27c.31 1.61.81 3.19 1.51 4.72M12 12c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2Z"/></svg>
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../getting_started/nodes_countries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nodes & Countries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../getting_started/interoperability/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interoperability
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../../getting_started/data_spaces/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Data spaces
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Data spaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../getting_started/data_spaces/join/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Join one
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../getting_started/data_spaces/deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploy one
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../getting_started/get_involved/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get involved
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../../data_catalog/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 4H2V2h16v2m-4.96 6h-10l.6-3h12.72l.4 2c.74.04 1.45.19 2.13.46L18 5H2l-1 5v2h1v6h8.5c-.33-.8-.5-1.65-.5-2.5v.5H4v-4h6v3.5c0-1.66.64-3.33 1.9-4.6.36-.35.74-.65 1.14-.9m10.35 11L22 22.39l-3.12-3.07c-.69.43-1.51.68-2.38.68-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5c0 .88-.25 1.71-.69 2.4l3.08 3.1M19 15.5a2.5 2.5 0 0 0-5 0 2.5 2.5 0 0 0 5 0Z"/></svg>
  
  <span class="md-ellipsis">
    Data catalog
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Data catalog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../data_catalog/instructions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to add new datasets?
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6H6m0 2h7v5h5v11H6V4m2 8v2h8v-2H8m0 4v2h5v-2H8Z"/></svg>
  
  <span class="md-ellipsis">
    Guides
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../data_federation/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Data Federation
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Data Federation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_2" id="__nav_4_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    NGSI-v2 to NGSI-LD
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_2">
            <span class="md-nav__icon md-icon"></span>
            NGSI-v2 to NGSI-LD
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../data_federation/ngsiv2_to_ld/lepus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lepus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../data_federation/ngsiv2_to_ld/iot_agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FIWARE IoT-Agent
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Data Space Connectors
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Data Space Connectors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../eclipse_mvd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Eclipse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Fiware
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3_3" id="__nav_4_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3_3">
            <span class="md-nav__icon md-icon"></span>
            Fiware
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_3_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Legacy (v. 1.X.X)
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3_3_2" id="__nav_4_3_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_3_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3_3_2">
            <span class="md-nav__icon md-icon"></span>
            Legacy (v. 1.X.X)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_3_2_2" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3_3_2_2" id="__nav_4_3_3_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Deployments
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_4_3_3_2_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3_3_2_2">
            <span class="md-nav__icon md-icon"></span>
            Deployments
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    AWS deployment
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    AWS deployment
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#aws-account-preparation" class="md-nav__link">
    <span class="md-ellipsis">
      AWS Account Preparation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AWS Account Preparation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-aws-service-fees" class="md-nav__link">
    <span class="md-ellipsis">
      Required AWS Service Fees
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-iam-user" class="md-nav__link">
    <span class="md-ellipsis">
      Creating an IAM user
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-cloudshell-installing-the-cli" class="md-nav__link">
    <span class="md-ellipsis">
      AWS CloudShell: Installing the CLI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the cluster
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating the cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#login-and-quota-verification" class="md-nav__link">
    <span class="md-ellipsis">
      Login and quota verification
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-the-cluster_1" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the cluster
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-hosted-zone-on-aws-route53" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Hosted Zone on AWS Route53
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#domains-routes-and-certificates" class="md-nav__link">
    <span class="md-ellipsis">
      Domains, Routes and Certificates
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Domains, Routes and Certificates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-external-dns" class="md-nav__link">
    <span class="md-ellipsis">
      Using External-DNS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-cert-manager" class="md-nav__link">
    <span class="md-ellipsis">
      Using Cert Manager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routes-and-certificates-in-fiware-ds-connector" class="md-nav__link">
    <span class="md-ellipsis">
      Routes and Certificates in FIWARE DS Connector
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-with-helm" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment with Helm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment with Helm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#download-connector-with-helm-chart" class="md-nav__link">
    <span class="md-ellipsis">
      Download connector with Helm Chart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-using-valuesyaml" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration using values.yaml
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#required-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Required secrets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ds-connector-installation" class="md-nav__link">
    <span class="md-ellipsis">
      DS Connector installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-routes" class="md-nav__link">
    <span class="md-ellipsis">
      Access routes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubectl-cheat-sheet" class="md-nav__link">
    <span class="md-ellipsis">
      Kubectl Cheat Sheet
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-ssl-secret-associated-with-vcwaltid-service-is-not-found" class="md-nav__link">
    <span class="md-ellipsis">
      The SSL secret associated with VCWaltid service is not found
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timed-out-waiting-for-the-condition" class="md-nav__link">
    <span class="md-ellipsis">
      Timed out waiting for the condition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gaiaxparticipantcredential-context" class="md-nav__link">
    <span class="md-ellipsis">
      GaiaXParticipantCredential context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sources" class="md-nav__link">
    <span class="md-ellipsis">
      Sources
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../local_deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Local deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_3_2_2_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../mvds_iaas/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Minimum Viable Data Space Infrastructure (MVDS-IaaS)
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_4_3_3_2_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_3_2_2_3">
            <span class="md-nav__icon md-icon"></span>
            Minimum Viable Data Space Infrastructure (MVDS-IaaS)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../../services/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.5 15.5c0 1.11-.89 2-2 2s-2-.89-2-2 .9-2 2-2 2 .9 2 2m-9-2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.89 2-2-.89-2-2-2M23 15v3c0 .55-.45 1-1 1h-1v1c0 1.11-.89 2-2 2H5a2 2 0 0 1-2-2v-1H2c-.55 0-1-.45-1-1v-3c0-.55.45-1 1-1h1c0-3.87 3.13-7 7-7h1V5.73c-.6-.34-1-.99-1-1.73 0-1.1.9-2 2-2s2 .9 2 2c0 .74-.4 1.39-1 1.73V7h1c3.87 0 7 3.13 7 7h1c.55 0 1 .45 1 1m-2 1h-2v-2c0-2.76-2.24-5-5-5h-4c-2.76 0-5 2.24-5 5v2H3v1h2v3h14v-3h2v-1Z"/></svg>
  
  <span class="md-ellipsis">
    AI services
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            AI services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../services/waste_collection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Minimal Interoperable AI Service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../services/wastecontainer_location_optimization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Container Location Optimization
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../../tef/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15 23h-2v-2h2v2m4-2h-2v2h2v-2m-4-4h-2v2h2v-2m-8 4H5v2h2v-2m0-4H5v2h2v-2m12 0h-2v2h2v-2m-4-4h-2v2h2v-2m4 0h-2v2h2v-2m2-4a2 2 0 0 1 2 2v12h-2V11H11v12H9v-8H3v8H1v-8a2 2 0 0 1 2-2h6v-2a2 2 0 0 1 2-2V7a2 2 0 0 1 2-2h2V1h2v4h2a2 2 0 0 1 2 2v2m-2 0V7h-6v2h6Z"/></svg>
  
  <span class="md-ellipsis">
    TEF Nodes
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            TEF Nodes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Nordic - POWER
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Nordic - POWER
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../tef/nordic_power/doll_living_lab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DOLL Living Lab
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../tef/nordic_power/aarhus_city_lab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aarhus City Lab
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../tef/nordic_power/dtu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DTU
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../tef/nordic_power/dti/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DTI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../tef/nordic_power/center_denmark/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Center Denmark
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../tef/nordic_power/gate21/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GATE21
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../tef/nordic_power/rise/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RISE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../tef/nordic_power/tampere/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tampere
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Central - MOVE
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Central - MOVE
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../tef/central_move/mechelen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mechelen
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../tef/central_move/brussels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Brussels
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../tef/central_move/eindhoven/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Eindhoven
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../tef/central_move/paris/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Paris
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../tef/central_move/list/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LIST
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    South - CONNECT
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            South - CONNECT
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../tef/south_connect/valencia/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Valencia
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../tef/south_connect/milano/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Milano
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../tef/south_connect/warsaw/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Warsaw
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../../toolbox/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 8h-3V6c0-1.1-.9-2-2-2H9c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v10h20V10c0-1.1-.9-2-2-2M9 6h6v2H9V6m11 12H4v-3h2v1h2v-1h8v1h2v-1h2v3m-2-5v-1h-2v1H8v-1H6v1H4v-3h16v3h-2Z"/></svg>
  
  <span class="md-ellipsis">
    Toolbox
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Toolbox
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../toolbox/ai_toolkit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AI Toolkit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../toolbox/mims_toolkit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MIMs Toolkit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../toolbox/other_toolkit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Other Tools
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#aws-account-preparation" class="md-nav__link">
    <span class="md-ellipsis">
      AWS Account Preparation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AWS Account Preparation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-aws-service-fees" class="md-nav__link">
    <span class="md-ellipsis">
      Required AWS Service Fees
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-iam-user" class="md-nav__link">
    <span class="md-ellipsis">
      Creating an IAM user
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-cloudshell-installing-the-cli" class="md-nav__link">
    <span class="md-ellipsis">
      AWS CloudShell: Installing the CLI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the cluster
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating the cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#login-and-quota-verification" class="md-nav__link">
    <span class="md-ellipsis">
      Login and quota verification
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-the-cluster_1" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the cluster
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-hosted-zone-on-aws-route53" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Hosted Zone on AWS Route53
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#domains-routes-and-certificates" class="md-nav__link">
    <span class="md-ellipsis">
      Domains, Routes and Certificates
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Domains, Routes and Certificates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-external-dns" class="md-nav__link">
    <span class="md-ellipsis">
      Using External-DNS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-cert-manager" class="md-nav__link">
    <span class="md-ellipsis">
      Using Cert Manager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routes-and-certificates-in-fiware-ds-connector" class="md-nav__link">
    <span class="md-ellipsis">
      Routes and Certificates in FIWARE DS Connector
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-with-helm" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment with Helm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment with Helm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#download-connector-with-helm-chart" class="md-nav__link">
    <span class="md-ellipsis">
      Download connector with Helm Chart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-using-valuesyaml" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration using values.yaml
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#required-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Required secrets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ds-connector-installation" class="md-nav__link">
    <span class="md-ellipsis">
      DS Connector installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-routes" class="md-nav__link">
    <span class="md-ellipsis">
      Access routes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubectl-cheat-sheet" class="md-nav__link">
    <span class="md-ellipsis">
      Kubectl Cheat Sheet
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-ssl-secret-associated-with-vcwaltid-service-is-not-found" class="md-nav__link">
    <span class="md-ellipsis">
      The SSL secret associated with VCWaltid service is not found
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timed-out-waiting-for-the-condition" class="md-nav__link">
    <span class="md-ellipsis">
      Timed out waiting for the condition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gaiaxparticipantcredential-context" class="md-nav__link">
    <span class="md-ellipsis">
      GaiaXParticipantCredential context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sources" class="md-nav__link">
    <span class="md-ellipsis">
      Sources
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/CitCom-VRAIN/CitCom-VRAIN.github.io/edit/main/docs/documentation/data_space_connectors/fiware/legacy_1.X.X/deployments/aws_deployment.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="aws-deployment">AWS deployment</h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Experimental guide. Errors may appear.</p>
</div>
<h2 id="aws-account-preparation">AWS Account Preparation</h2>
<p>Here are the steps for preparing an AWS account to deploy a Red Hat OpenShift Service (ROSA) cluster.</p>
<h3 id="required-aws-service-fees">Required AWS Service Fees</h3>
<p>The following table describes the AWS quotas and service levels required to create and run a Red Hat OpenShift Service (ROSA) cluster.</p>
<p>Large quota requests are sent to Amazon Support for review and may take some time to be approved.</p>
<table>
<thead>
<tr>
<th><strong>Service code</strong></th>
<th>Quota name</th>
<th>Quota code</th>
<th>AWS default</th>
<th>Minimum required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ec2</td>
<td>Running On-Demand Standard (A, C, D, H, I, M, R, T, Z) instances</td>
<td>L-1216C47A</td>
<td>5</td>
<td>100</td>
<td>Maximum number of vCPUs assigned to the Running On-Demand Standard (A, C, D, H, I, M, R, T, Z) instances.<br><br>The default value of 5 vCPUs is not sufficient to create ROSA clusters. ROSA has a minimum requirement of 100 vCPUs for cluster creation.</td>
</tr>
<tr>
<td>ebs</td>
<td>Storage for General Purpose SSD (gp2) volume storage in TiB</td>
<td>L-D18FCD1D</td>
<td>50</td>
<td>300</td>
<td>The maximum aggregated amount of storage, in TiB, that can be provisioned across General Purpose SSD (gp2) volumes in this Region.</td>
</tr>
<tr>
<td>ebs</td>
<td>Storage for General Purpose SSD (gp3) volume storage in TiB</td>
<td>L-7A658B76</td>
<td>50</td>
<td>300</td>
<td>The maximum aggregated amount of storage, in TiB, that can be provisioned across General Purpose SSD (gp3) volumes in this Region.<br><br>300 TiB of storage is the required minimum for optimal performance.</td>
</tr>
<tr>
<td>ebs</td>
<td>Storage for Provisioned IOPS SSD (io1) volumes in TiB</td>
<td>L-FD252861</td>
<td>50</td>
<td>300</td>
<td>The maximum aggregated amount of storage, in TiB, that can be provisioned across Provisioned IOPS SSD (io1) volumes in this Region.<br><br>300 TiB of storage is the required minimum for optimal performance.</td>
</tr>
</tbody>
</table>
<h3 id="creating-an-iam-user">Creating an IAM user</h3>
<p>Creating an IAM (Identity and Access Management) user in AWS is necessary to securely manage access and permissions associated with AWS resources that will be used by the OpenShift cluster.</p>
<p>We will create this user from the AWS portal IAM service (IAM &gt; Users &gt; Create User). We will then specify a user name and select the option "Provide user access to the AWS Management Console" and "I want to create an IAM user" as shown in the following image:</p>
<p>After clicking on "Next", we will have to configure the user's permissions. We must select the option "Attach policies directly" and select the <strong>AdministratorAccess</strong> permissions policy.</p>
<p>After creating the user, we will be shown the login details. We will be able to log in as an IAM user via the URL provided.</p>
<h3 id="aws-cloudshell-installing-the-cli">AWS CloudShell: Installing the CLI</h3>
<p>Once logged in with the new IAM user, the CloudShell console can be accessed from the top panel of the AWS portal.https://062041447189.signin.aws.amazon.com/console.</p>
<p>Download ROSA CLI, unzip it and add it to the PATH:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>wget<span class="w"> </span>https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/rosa/latest/rosa-linux.tar.gz
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>tar<span class="w"> </span>zxvf<span class="w"> </span>rosa-linux.tar.gz
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>~:<span class="nv">$PATH</span>
</span></code></pre></div></p>
<p>Download Openshift CLI through ROSA:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>rosa<span class="w"> </span>download<span class="w"> </span>oc
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>tar<span class="w"> </span>zxvf<span class="w"> </span>openshift-client-linux.tar.gz
</span></code></pre></div></p>
<h2 id="creating-the-cluster">Creating the cluster</h2>
<p>We will explain the steps involved in creating a Red Hat OpenShift Service cluster on AWS (ROSA).</p>
<h3 id="login-and-quota-verification">Login and quota verification</h3>
<p>To log in to ROSA CLI, we need to obtain our Red Hat account token from the following <a href="https://console.redhat.com/openshift/create/rosa/getstarted">link</a></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>rosa<span class="w"> </span>login<span class="w"> </span>--token<span class="o">=</span>&lt;RED_HAT_TOKEN&gt;
</span></code></pre></div>
<p>Then we can check our user:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>rosa<span class="w"> </span>whoami
</span></code></pre></div></p>
<figure>
<p><img alt="Whoami" loading="lazy" src="../img/aws/whoami.png" /></p>
</figure>
<p>Before proceeding with the creation of the Openshift cluster, let's check that our AWS account meets the minimum required quotas:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>rosa<span class="w"> </span>verify<span class="w"> </span>quota
</span></code></pre></div>
<figure>
<p><img alt="Verify quota" loading="lazy" src="../img/aws/verify_quota.png" /></p>
</figure>
<p>If everything is correct, we can proceed with the creation of roles for our Red Hat account account (first time only):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>rosa<span class="w"> </span>create<span class="w"> </span>account-roles<span class="w"> </span>--mode<span class="w"> </span>auto<span class="w"> </span>--yes
</span></code></pre></div>
<figure>
<p><img alt="Create account" loading="lazy" src="../img/aws/create_account.png" /></p>
</figure>
<h3 id="creating-the-cluster_1">Creating the cluster</h3>
<p>Next, we can proceed to create the cluster. The creation time is approximately 30/40 minutes.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>rosa<span class="w"> </span>create<span class="w"> </span>cluster<span class="w"> </span>--cluster-name<span class="w"> </span>rosa-dataspaces<span class="w"> </span>--sts<span class="w"> </span>--mode<span class="w"> </span>auto<span class="w"> </span>--yes
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>--version<span class="w"> </span><span class="m">4</span>.12.41
</span></code></pre></div>
<p>After the installation is complete, obtain the cluster information:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>rosa<span class="w"> </span>list<span class="w"> </span>clusters
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>rosa<span class="w"> </span>describe<span class="w"> </span>cluster<span class="w"> </span>--cluster<span class="w"> </span>&lt;name&gt;
</span></code></pre></div>
<figure>
<p><img alt="Create account" loading="lazy" src="../img/aws/describe_cluster.png" /></p>
</figure>
<p>Create the cluster admin user:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>rosa<span class="w"> </span>create<span class="w"> </span>admin<span class="w"> </span>--cluster<span class="o">=</span>&lt;name&gt;
</span></code></pre></div>
<p>The user will not be available immediately, we will have to wait several minutes (about 5 minutes) before proceeding with the login to the Openshift cluster. </p>
<p>Source: <a href="https://youtu.be/amLN6-JxygU?feature=shared">https://youtu.be/amLN6-JxygU?feature=shared</a></p>
<h2 id="creating-hosted-zone-on-aws-route53">Creating Hosted Zone on AWS Route53</h2>
<p>Hosted zones on Amazon Route 53 are log containers that contain information about how you want to route traffic for a given domain and its corresponding subdomains.</p>
<p>We are going to create a Hosted Zone in Route53 to route the traffic of the subdomains where we are going to host the applications of the Openshift cluster, which are the different components of the Data Space Connector.</p>
<p>To do this, we need to have in our possession a given domain. In our case, the domain used is ds.smartcity-marketplace.com.</p>
<p>Through the AWS services panel, we will be able to go to AWS Route53. There we can create a hosted zone by clicking on Hosted Zones &gt; Create a hosted zone. We will have to set our domain as the zone name and select "Public hosted zone". After creating it, we will be able to access the created zone and consult the assigned nameservers. We will have to set these name servers as the Custom DNS of our domain at the provider where we purchased it.</p>
<h2 id="domains-routes-and-certificates">Domains, Routes and Certificates</h2>
<p>The deployment of the FIWARE Data Space Connector assumes that you have an Openshift cluster that is able to manage domains, SSL certificates and configure routes. To achieve this, we need to install the following operators in our cluster:</p>
<ul>
<li>
<p><strong>External-DNS</strong>, which facilitates the automatic allocation and update of DNS records for services exposed in the cluster. When a service is created in Openshift, External-DNS detects these services and automatically creates or updates external DNS records (in our case, the hosted zone created in Route53) to point to the IP addresses of those services.</p>
</li>
<li>
<p><strong>Cert-Manager</strong>, which automates the issuance, renewal and management of SSL certificates in the cluster. Cert-Manager can integrate with services such as Let's Encrypt to automatically provide SSL certificates to applications that need them.</p>
</li>
<li>
<p><strong>Cert-Utils</strong>, which is an OpenShift-specific operator and is used to automatically inject certificates into Route objects. In OpenShift, routes are objects that define how an application is exposed to external traffic. Cert-Utils is used to automate the injection of SSL certificates into these route objects.</p>
</li>
</ul>
<p>The process to follow to install these components is explained in the FIWARE repository: <a href="https://github.com/FIWARE-Ops/fiware-gitops/blob/master/doc/ROUTES.md">ROUTES.md</a>.</p>
<figure>
<p><img alt="DSC components" loading="lazy" src="../img/aws/dsc_components.png" /></p>
</figure>
<h3 id="using-external-dns">Using External-DNS</h3>
<p>After installing, we can check that the operator has been deployed correctly by executing:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>kubectl<span class="w"> </span>get<span class="w"> </span>all<span class="w"> </span>-n<span class="w"> </span>external-dns-operator
</span></code></pre></div>
<figure>
<p><img alt="External DNS" loading="lazy" src="../img/aws/external_dns.png" /></p>
</figure>
<p>If everything is OK, we can move on to the creation of the External DNS resource that will be responsible for creating entries in our Route53 Hosted Zone.</p>
<p>First we create a Kubernetes secret with the access key and the AWS secret. If we do not have this access key + secret, we can create them from the AWS IAM Portal. It is important to verify that the user associated with the access key has permissions for CRUD in Route53 (users with AdministratorAccess have these permissions).</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>apiVersion:<span class="w"> </span>v1
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>kind:<span class="w"> </span>Secret
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>metadata:
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>name:<span class="w"> </span>aws-access-key
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>namespace:<span class="w"> </span>external-dns-operator
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>type:<span class="w"> </span>Opaque
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>data:
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>aws_access_key_id:<span class="w"> </span>&lt;BASE<span class="w"> </span><span class="m">64</span><span class="w"> </span>ACCES<span class="w"> </span>KEY<span class="w"> </span>ID&gt;
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>aws_secret_access_key:<span class="w"> </span>&lt;BASE<span class="w"> </span><span class="m">64</span><span class="w"> </span>ACCESS<span class="w"> </span>KEY<span class="w"> </span>SECRET&gt;
</span></code></pre></div>
<p><strong>Note:</strong> to execute any resource in Openshift, we create a YAML file (.yaml extension) with its definition. Then run <code>kubectl apply -f &lt;YAML FILE&gt;</code>.</p>
<p>The values of the secrets must be in base 64. We can use the following command to get our access ID and key in base 64:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nb">echo</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;&lt;BASE 64 ACCESS KEY ID&gt;&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="nb">echo</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;&lt;BASE 64 ACCESS KEY SECRET&gt;&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64
</span></code></pre></div>
<p>Next, we are going to create a resource of type ExternalDNS and associate it to our Route 53 DNS Zone. The idea is that, every time a service (with assigned host) is created in the cluster, the External DNS will automatically create the entry in our DNS Zone.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>apiVersion:<span class="w"> </span>externaldns.olm.openshift.io/v1alpha1
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>kind:<span class="w"> </span>ExternalDNS
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>metadata:
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>name:<span class="w"> </span>aws-routes-libelium-dev
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>spec:
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>provider:
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>type:<span class="w"> </span>AWS
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>aws:
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>credentials:
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>name:<span class="w"> </span>aws-access-key
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>zones:
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>-<span class="w"> </span><span class="s2">&quot;Z08275492EDOR2ZSK994S&quot;</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>source:
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>type:<span class="w"> </span>OpenShiftRoute
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>openshiftRouteOptions:
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a>routerName:<span class="w"> </span>default
</span></code></pre></div>
<p>The value Z08275492EDOR2ZSK994S is the ID of the Route53 hosted zone, which in our case is the zone of the domain ds.smartcity-marketplace.com.</p>
<h3 id="using-cert-manager">Using Cert Manager</h3>
<p>After the installation, we can check that the operator has been deployed correctly by running by executing:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>kubectl<span class="w"> </span>get<span class="w"> </span>all<span class="w"> </span>-n<span class="w"> </span>openshift-operators
</span></code></pre></div>
<figure>
<p><img alt="Cert manager" loading="lazy" src="../img/aws/cert_manager.png" /></p>
</figure>
<p>Now we are going to create a Kubernetes secret with the access key and the AWS secret, in the same way as we did in the previous section. This is necessary because the secrets are created at namespace level, if we want to have a secret in several namespaces, we will have to create it in each of them independently.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>apiVersion:<span class="w"> </span>v1
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>kind:<span class="w"> </span>Secret
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>metadata:
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>name:<span class="w"> </span>aws-access-key
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>namespace:<span class="w"> </span>openshift-operators
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>type:<span class="w"> </span>Opaque
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>data:
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>aws_secret_access_key:<span class="w"> </span>&lt;BASE<span class="w"> </span><span class="m">64</span><span class="w"> </span>ACCESS<span class="w"> </span>KEY<span class="w"> </span>SECRET&gt;
</span></code></pre></div>
<p>We can now move on to create a new Kubernete resource called Cluster Issuer. This resource represents Certificate Authorities (CA) that can generate signed certificates in response to requests. response to requests. In our case, we are going to create two different Cluster Issuers, one that will use Let's Encrypt as CA and another that will generate self-signed certificates. The first one is the one that we are interested in using when we do the final deployment of the connector, since it provides us with reliable certificates. provides us with trusted certificates. The second one will be used to test the deployment of the connector. connector.</p>
<p>This is because during the deployment of the connector it is very likely that we will encounter errors that we will have to debug, so we will perform the deployment several times until all the components work correctly. Let's Encrypt has a policy of not generating more than 5 certificates for the same domain in a given period of time. It is crucial to take this limitation into account during the deployment process, since exceeding this limit could lead to restrictions in the issuance of certificates for our domain.</p>
<p>Therefore, it is advisable to use self-signed certificates until all the connector components are working properly.</p>
<p>ClusterIssuer to generate TLS certificates through Let's Encrypt:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>apiVersion:<span class="w"> </span>cert-manager.io/v1
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>kind:<span class="w"> </span>ClusterIssuer
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>metadata:
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>name:<span class="w"> </span>letsencrypt-prod
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>spec:
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>acme:
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>email:<span class="w"> </span>mj.bernal@libelium.com
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>preferredChain:<span class="w"> </span><span class="s2">&quot;&quot;</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>privateKeySecretRef:
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>name:<span class="w"> </span>lets-encrypt-prod-issuer-account-key
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>server:<span class="w"> </span>https://acme-v02.api.letsencrypt.org/directory
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>solvers:
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>-<span class="w"> </span>selector:
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>dnsZones:
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>-<span class="w"> </span><span class="s2">&quot;ds.smartcity-marketplace.com&quot;</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>dns01:
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>route53:
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a>region:<span class="w"> </span>eu-west-1
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>hostedZoneID:<span class="w"> </span>Z08275492EDOR2ZSK994S
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a>accessKeyID:<span class="w"> </span>AKIAQ44PVLMK76NPBH63
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a>secretAccessKeySecretRef:
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a>name:<span class="w"> </span>aws-access-key
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a>key:<span class="w"> </span>aws_secret_access_key
</span></code></pre></div></p>
<p>ClusterIssuer to generate self-signed certificates:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>apiVersion:<span class="w"> </span>cert-manager.io/v1
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>kind:<span class="w"> </span>ClusterIssuer
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>metadata:
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>name:<span class="w"> </span>self-signed
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>spec:
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>selfSigned:<span class="w"> </span><span class="o">{}</span>
</span></code></pre></div></p>
<figure>
<p><img alt="Cluster issuers" loading="lazy" src="../img/aws/cluster_issuers.png" /></p>
</figure>
<p>Once we have created the Cluster Issuers, let's check if they are able to request and store the certificates. store the certificates. To do this we create Certificate type resources.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>apiVersion:<span class="w"> </span>cert-manager.io/v1
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>kind:<span class="w"> </span>Certificate
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>metadata:
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>name:<span class="w"> </span>letsencrypt-cert
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>spec:
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>secretName:<span class="w"> </span>letsencrypt-tls-secret
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>issuerRef:
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>kind:<span class="w"> </span>ClusterIssuer
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>name:<span class="w"> </span>letsencrypt-prod
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>commonName:<span class="w"> </span><span class="s2">&quot;*.ds.smartcity-marketplace.com&quot;</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>dnsNames:
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>-<span class="w"> </span><span class="s2">&quot;*.ds.smartcity-marketplace.com&quot;</span>
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>apiVersion:<span class="w"> </span>cert-manager.io/v1
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>kind:<span class="w"> </span>Certificate
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>metadata:
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>name:<span class="w"> </span>selfsigned-cert
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>spec:
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>secretName:<span class="w"> </span>selfsigned-tls-secret
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>issuerRef:
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>kind:<span class="w"> </span>ClusterIssuer
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>name:<span class="w"> </span>self-signed
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>commonName:<span class="w"> </span><span class="s2">&quot;*.ds.smartcity-marketplace.com&quot;</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>dnsNames:
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>-<span class="w"> </span><span class="s2">&quot;*.ds.smartcity-marketplace.com&quot;</span>
</span></code></pre></div>
<p>We can check the status of the certificates by executing the following command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>kubectl<span class="w"> </span>get<span class="w"> </span>certificates
</span></code></pre></div>
<figure>
<p><img alt="Get certificates" loading="lazy" src="../img/aws/get_certificates.png" /></p>
</figure>
<p>If the value TRUE appears in the READY column, it means that the certificates have been successfully obtained and stored in the indicated secrets. We can also check the secrets by executing the following command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>kubectl<span class="w"> </span>get<span class="w"> </span>secrets<span class="w"> </span>--field-selector<span class="w"> </span><span class="nv">type</span><span class="o">=</span>kubernetes.io/tls
</span></code></pre></div>
<figure>
<p><img alt="Get secrets" loading="lazy" src="../img/aws/get_secrets.png" /></p>
</figure>
<p>These secrets contain the following values:
  - tls.key: private key of the certificate
  - tls.crt: certificate
  - ca.crt: the CA that validates the certificate.</p>
<p>In the case of self-signed certificates, it only contains the first two.</p>
<h3 id="routes-and-certificates-in-fiware-ds-connector">Routes and Certificates in FIWARE DS Connector</h3>
<p>It is necessary to have all these Openshift components working properly in our cluster, because during the installation of the FIWARE Data Space Connector with Helm the services are exposed using these resources. The services that are exposed through a subdomain are: <strong>keyrock, activation-service, keycloak, kong, trusted-issuers-list-til, trusted-issuers-list-tir, vcverifier, vcwaltid and vcwaltid-cert</strong>.</p>
<p>To expose each of these services, a number of objects are automatically created:</p>
<ul>
<li><strong>Route objects:</strong> This resource is used to expose services across the network and allow external access to connector applications.
    <figure markdown>
    <img alt="Route objects" loading="lazy" src="../img/aws/route_objects.png" />
    </figure></li>
<li><strong>Certificate objects:</strong> this resource is used for the management (obtaining, maintenance...) of TLS/SSL certificates for the connector's applications.
     <figure markdown>
    <img alt="Certificate objects" loading="lazy" src="../img/aws/certificate_objects.png" />
    </figure></li>
<li><strong>Secret objects (TLS secret):</strong> these secrets contain the tls.crt and tls.key values associated with each path to services in the cluster. If these secrets are not being created correctly, the connector deployment fails. connector deployment fails.
     <figure markdown>
    <img alt="Secret objects" loading="lazy" src="../img/aws/secret_objects.png" />
    </figure></li>
</ul>
<h2 id="deployment-with-helm">Deployment with Helm</h2>
<p>Helm is a package manager for Kubernetes, which simplifies and automates the deployment and management of applications. A "Helm chart" is a pre-configured Kubernetes resource bundle, designed to be easily shared, versioned and installed using Helm.</p>
<p>The FIWARE Data Space Connector is distributed as an Umbrella-Chart that contains all of the sub-charts (one for each component of the connector) and the necessary dependencies for deployment. deployment.</p>
<h3 id="download-connector-with-helm-chart">Download connector with Helm Chart</h3>
<p>We can download the connector via the chart repository:</p>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="c1"># add the repo</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>dsc<span class="w"> </span>https://fiware-ops.github.io/data-space-connector/
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="c1"># Check repo</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>helm<span class="w"> </span>repo<span class="w"> </span>list
</span></code></pre></div>
Then, the chart will be ready to be used.
    <figure markdown>
    <img alt="Helm repo list" loading="lazy" src="../img/aws/helm_rempo_list.png" />
    </figure></p>
<p>We can also download the source code (releases) directly:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="c1"># set version you are interested in</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="nv">version</span><span class="o">=</span><span class="m">0</span>.9.0
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>wget
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>https://github.com/FIWARE-Ops/data-space-connector/releases/download/data-sp
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>ace-connector-<span class="nv">$version</span>/data-space-connector-<span class="nv">$version</span>.tgz<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>tar<span class="w"> </span>-xzvf
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>data-space-connector-<span class="nv">$version</span>.tgz
</span></code></pre></div></p>
<h3 id="configuration-using-valuesyaml">Configuration using values.yaml</h3>
<p>As we have seen, a Helm Chart is a package that contains all the necessary resources to deploy an application in Kubernetes, in our case, to launch each of the components of the connector.</p>
<p>In the source code we can see that each of the components is presented as a sub-chart, which in turn has its own templates, dependencies, sub-charts and configuration files. configuration files.</p>
<figure>
<p><img alt="Project folder" loading="lazy" src="../img/aws/project_folder.png" /></p>
</figure>
<p>To finish defining everything necessary for the deployment of the connector, we will have to create a global configuration file (values.yaml) in which, for each of the components, we define the necessary parameters so that the connector can be deployed in our environment. The values that we define in this global configuration file, somehow complete or overwrite the configuration parameters that come by default in the helm chart. Let's start from the configuration file provided by FIWARE: <a href="https://github.com/FIWARE-Ops/fiware-gitops/blob/master/aws/dsba/packet-delivery/data-space-connector/values.yaml">values.yaml</a>.</p>
<p>For example, the configuration for the VCWaltid component would be as follows:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="c1"># Nombre del componente a configurar</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>vcwaltid:
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="c1"># Permitir el despliegue del compoente vcwaltid</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>deploymentEnabled:<span class="w"> </span><span class="nb">true</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="c1"># Definir el Decentralized ID de la organización</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>did:<span class="w"> </span>did:web:pdc-demo.ds.smartcity-marketplace.com:did
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="c1"># Definir la ruta al host de la aplicación vcwaltid</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>route:
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>enabled:<span class="w"> </span><span class="nb">true</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="c1"># Subdominio que alojará la aplcación</span>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>host:<span class="w"> </span>pdc-demo.ds.smartcity-marketplace.com
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="c1"># Configuración TLS</span>
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a>tls:
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a>insecureEdgeTerminationPolicy:<span class="w"> </span>Redirect
</span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a>termination:<span class="w"> </span>edge
</span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="c1"># Indicamos quien maneja los certificados</span>
</span><span id="__span-24-17"><a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a><span class="c1"># En nuestro caso el Cluster Issuer que hemos creado en pasos anteriores</span>
</span><span id="__span-24-18"><a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a>certificate:
</span><span id="__span-24-19"><a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a>issuer:
</span><span id="__span-24-20"><a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a>kind:<span class="w"> </span>ClusterIssuer
</span><span id="__span-24-21"><a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a>name:<span class="w"> </span>letsencrypt-prod
</span><span id="__span-24-22"><a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a><span class="c1"># Walt-id configuración interna</span>
</span><span id="__span-24-23"><a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a>vcwaltid:
</span><span id="__span-24-24"><a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a><span class="c1"># Persistence</span>
</span><span id="__span-24-25"><a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a>persistence:
</span><span id="__span-24-26"><a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a>enabled:<span class="w"> </span><span class="nb">true</span>
</span><span id="__span-24-27"><a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a>pvc:
</span><span id="__span-24-28"><a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a>size:<span class="w"> </span>1Gi
</span><span id="__span-24-29"><a id="__codelineno-24-29" name="__codelineno-24-29" href="#__codelineno-24-29"></a><span class="c1"># Lista de plantillas a crear</span>
</span><span id="__span-24-30"><a id="__codelineno-24-30" name="__codelineno-24-30" href="#__codelineno-24-30"></a>templates:
</span><span id="__span-24-31"><a id="__codelineno-24-31" name="__codelineno-24-31" href="#__codelineno-24-31"></a>GaiaXParticipantCredential.json:<span class="w"> </span><span class="p">|</span>
</span><span id="__span-24-32"><a id="__codelineno-24-32" name="__codelineno-24-32" href="#__codelineno-24-32"></a><span class="o">{</span>
</span><span id="__span-24-33"><a id="__codelineno-24-33" name="__codelineno-24-33" href="#__codelineno-24-33"></a><span class="s2">&quot;@context&quot;</span>:<span class="w"> </span><span class="o">[</span>
</span><span id="__span-24-34"><a id="__codelineno-24-34" name="__codelineno-24-34" href="#__codelineno-24-34"></a><span class="s2">&quot;https://www.w3.org/2018/credentials/v1&quot;</span>,
</span><span id="__span-24-35"><a id="__codelineno-24-35" name="__codelineno-24-35" href="#__codelineno-24-35"></a><span class="s2">&quot;https://registry.lab.dsba.eu/development/api/trusted-shape-registry/v1/shap</span>
</span><span id="__span-24-36"><a id="__codelineno-24-36" name="__codelineno-24-36" href="#__codelineno-24-36"></a><span class="s2">es/jsonld/trustframework#&quot;</span>
</span><span id="__span-24-37"><a id="__codelineno-24-37" name="__codelineno-24-37" href="#__codelineno-24-37"></a><span class="o">]</span>,
</span><span id="__span-24-38"><a id="__codelineno-24-38" name="__codelineno-24-38" href="#__codelineno-24-38"></a><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="o">[</span>
</span><span id="__span-24-39"><a id="__codelineno-24-39" name="__codelineno-24-39" href="#__codelineno-24-39"></a><span class="s2">&quot;VerifiableCredential&quot;</span>
</span><span id="__span-24-40"><a id="__codelineno-24-40" name="__codelineno-24-40" href="#__codelineno-24-40"></a><span class="o">]</span>,
</span><span id="__span-24-41"><a id="__codelineno-24-41" name="__codelineno-24-41" href="#__codelineno-24-41"></a><span class="s2">&quot;id&quot;</span>:<span class="w"> </span><span class="s2">&quot;did:web:raw.githubusercontent.com:egavard:payload-sign:master&quot;</span>,
</span><span id="__span-24-42"><a id="__codelineno-24-42" name="__codelineno-24-42" href="#__codelineno-24-42"></a><span class="s2">&quot;issuer&quot;</span>:
</span><span id="__span-24-43"><a id="__codelineno-24-43" name="__codelineno-24-43" href="#__codelineno-24-43"></a><span class="s2">&quot;did:web:raw.githubusercontent.com:egavard:payload-sign:master&quot;</span>,
</span><span id="__span-24-44"><a id="__codelineno-24-44" name="__codelineno-24-44" href="#__codelineno-24-44"></a><span class="s2">&quot;issuanceDate&quot;</span>:<span class="w"> </span><span class="s2">&quot;2023-03-21T12:00:00.148Z&quot;</span>,
</span><span id="__span-24-45"><a id="__codelineno-24-45" name="__codelineno-24-45" href="#__codelineno-24-45"></a><span class="s2">&quot;credentialSubject&quot;</span>:<span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-46"><a id="__codelineno-24-46" name="__codelineno-24-46" href="#__codelineno-24-46"></a><span class="s2">&quot;id&quot;</span>:<span class="w"> </span><span class="s2">&quot;did:web:raw.githubusercontent.com:egavard:payload-sign:master&quot;</span>,
</span><span id="__span-24-47"><a id="__codelineno-24-47" name="__codelineno-24-47" href="#__codelineno-24-47"></a><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;gx:LegalParticipant&quot;</span>,
</span><span id="__span-24-48"><a id="__codelineno-24-48" name="__codelineno-24-48" href="#__codelineno-24-48"></a><span class="s2">&quot;gx:legalName&quot;</span>:<span class="w"> </span><span class="s2">&quot;dsba compliant participant&quot;</span>,
</span><span id="__span-24-49"><a id="__codelineno-24-49" name="__codelineno-24-49" href="#__codelineno-24-49"></a><span class="s2">&quot;gx:legalRegistrationNumber&quot;</span>:<span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-50"><a id="__codelineno-24-50" name="__codelineno-24-50" href="#__codelineno-24-50"></a><span class="s2">&quot;gx:vatID&quot;</span>:<span class="w"> </span><span class="s2">&quot;MYVATID&quot;</span>
</span><span id="__span-24-51"><a id="__codelineno-24-51" name="__codelineno-24-51" href="#__codelineno-24-51"></a><span class="o">}</span>,
</span><span id="__span-24-52"><a id="__codelineno-24-52" name="__codelineno-24-52" href="#__codelineno-24-52"></a><span class="s2">&quot;gx:headquarterAddress&quot;</span>:<span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-53"><a id="__codelineno-24-53" name="__codelineno-24-53" href="#__codelineno-24-53"></a><span class="s2">&quot;gx:countrySubdivisionCode&quot;</span>:<span class="w"> </span><span class="s2">&quot;BE-BRU&quot;</span>
</span><span id="__span-24-54"><a id="__codelineno-24-54" name="__codelineno-24-54" href="#__codelineno-24-54"></a><span class="o">}</span>,
</span><span id="__span-24-55"><a id="__codelineno-24-55" name="__codelineno-24-55" href="#__codelineno-24-55"></a><span class="s2">&quot;gx:legalAddress&quot;</span>:<span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-56"><a id="__codelineno-24-56" name="__codelineno-24-56" href="#__codelineno-24-56"></a><span class="s2">&quot;gx:countrySubdivisionCode&quot;</span>:<span class="w"> </span><span class="s2">&quot;BE-BRU&quot;</span>
</span><span id="__span-24-57"><a id="__codelineno-24-57" name="__codelineno-24-57" href="#__codelineno-24-57"></a><span class="o">}</span>,
</span><span id="__span-24-58"><a id="__codelineno-24-58" name="__codelineno-24-58" href="#__codelineno-24-58"></a><span class="s2">&quot;gx-terms-and-conditions:gaiaxTermsAndConditions&quot;</span>:
</span><span id="__span-24-59"><a id="__codelineno-24-59" name="__codelineno-24-59" href="#__codelineno-24-59"></a><span class="s2">&quot;70c1d713215f95191a11d38fe2341faed27d19e083917bc8732ca4fea4976700&quot;</span>
</span><span id="__span-24-60"><a id="__codelineno-24-60" name="__codelineno-24-60" href="#__codelineno-24-60"></a><span class="o">}</span>
</span><span id="__span-24-61"><a id="__codelineno-24-61" name="__codelineno-24-61" href="#__codelineno-24-61"></a><span class="o">}</span>
</span><span id="__span-24-62"><a id="__codelineno-24-62" name="__codelineno-24-62" href="#__codelineno-24-62"></a>NaturalPersonCredential.json:<span class="w"> </span><span class="p">|</span>
</span><span id="__span-24-63"><a id="__codelineno-24-63" name="__codelineno-24-63" href="#__codelineno-24-63"></a><span class="o">{</span>
</span><span id="__span-24-64"><a id="__codelineno-24-64" name="__codelineno-24-64" href="#__codelineno-24-64"></a><span class="s2">&quot;@context&quot;</span>:<span class="w"> </span><span class="o">[</span><span class="s2">&quot;https://www.w3.org/2018/credentials/v1&quot;</span><span class="o">]</span>,
</span><span id="__span-24-65"><a id="__codelineno-24-65" name="__codelineno-24-65" href="#__codelineno-24-65"></a><span class="s2">&quot;credentialSchema&quot;</span>:<span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-66"><a id="__codelineno-24-66" name="__codelineno-24-66" href="#__codelineno-24-66"></a><span class="s2">&quot;id&quot;</span>:
</span><span id="__span-24-67"><a id="__codelineno-24-67" name="__codelineno-24-67" href="#__codelineno-24-67"></a><span class="s2">&quot;https://raw.githubusercontent.com/FIWARE-Ops/tech-x-challenge/main/schema.j</span>
</span><span id="__span-24-68"><a id="__codelineno-24-68" name="__codelineno-24-68" href="#__codelineno-24-68"></a><span class="s2">son&quot;</span>,
</span><span id="__span-24-69"><a id="__codelineno-24-69" name="__codelineno-24-69" href="#__codelineno-24-69"></a><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;FullJsonSchemaValidator2021&quot;</span>
</span><span id="__span-24-70"><a id="__codelineno-24-70" name="__codelineno-24-70" href="#__codelineno-24-70"></a><span class="o">}</span>,
</span><span id="__span-24-71"><a id="__codelineno-24-71" name="__codelineno-24-71" href="#__codelineno-24-71"></a><span class="s2">&quot;credentialSubject&quot;</span>:<span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-72"><a id="__codelineno-24-72" name="__codelineno-24-72" href="#__codelineno-24-72"></a><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;gx:NaturalParticipant&quot;</span>,
</span><span id="__span-24-73"><a id="__codelineno-24-73" name="__codelineno-24-73" href="#__codelineno-24-73"></a><span class="s2">&quot;familyName&quot;</span>:<span class="w"> </span><span class="s2">&quot;Happy&quot;</span>,
</span><span id="__span-24-74"><a id="__codelineno-24-74" name="__codelineno-24-74" href="#__codelineno-24-74"></a><span class="s2">&quot;firstName&quot;</span>:<span class="w"> </span><span class="s2">&quot;User&quot;</span>,
</span><span id="__span-24-75"><a id="__codelineno-24-75" name="__codelineno-24-75" href="#__codelineno-24-75"></a><span class="s2">&quot;roles&quot;</span>:<span class="w"> </span><span class="o">[{</span>
</span><span id="__span-24-76"><a id="__codelineno-24-76" name="__codelineno-24-76" href="#__codelineno-24-76"></a><span class="s2">&quot;names&quot;</span>:<span class="w"> </span><span class="o">[</span><span class="s2">&quot;LEGAL_REPRESENTATIVE&quot;</span><span class="o">]</span>,
</span><span id="__span-24-77"><a id="__codelineno-24-77" name="__codelineno-24-77" href="#__codelineno-24-77"></a><span class="s2">&quot;target&quot;</span>:<span class="w"> </span><span class="s2">&quot;did:web:onboarding&quot;</span>
</span><span id="__span-24-78"><a id="__codelineno-24-78" name="__codelineno-24-78" href="#__codelineno-24-78"></a><span class="o">}]</span>
</span><span id="__span-24-79"><a id="__codelineno-24-79" name="__codelineno-24-79" href="#__codelineno-24-79"></a><span class="o">}</span>,
</span><span id="__span-24-80"><a id="__codelineno-24-80" name="__codelineno-24-80" href="#__codelineno-24-80"></a><span class="s2">&quot;id&quot;</span>:<span class="w"> </span><span class="s2">&quot;urn:uuid:3add94f4-28ec-42a1-8704-4e4aa51006b4&quot;</span>,
</span><span id="__span-24-81"><a id="__codelineno-24-81" name="__codelineno-24-81" href="#__codelineno-24-81"></a><span class="s2">&quot;issued&quot;</span>:<span class="w"> </span><span class="s2">&quot;2021-08-31T00:00:00Z&quot;</span>,
</span><span id="__span-24-82"><a id="__codelineno-24-82" name="__codelineno-24-82" href="#__codelineno-24-82"></a><span class="s2">&quot;issuer&quot;</span>:<span class="w"> </span><span class="s2">&quot;did:ebsi:2A9BZ9SUe6BatacSpvs1V5CdjHvLpQ7bEsi2Jb6LdHKnQxaN&quot;</span>,
</span><span id="__span-24-83"><a id="__codelineno-24-83" name="__codelineno-24-83" href="#__codelineno-24-83"></a><span class="s2">&quot;validFrom&quot;</span>:<span class="w"> </span><span class="s2">&quot;2021-08-31T00:00:00Z&quot;</span>,
</span><span id="__span-24-84"><a id="__codelineno-24-84" name="__codelineno-24-84" href="#__codelineno-24-84"></a><span class="s2">&quot;issuanceDate&quot;</span>:<span class="w"> </span><span class="s2">&quot;2021-08-31T00:00:00Z&quot;</span>,
</span><span id="__span-24-85"><a id="__codelineno-24-85" name="__codelineno-24-85" href="#__codelineno-24-85"></a><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="o">[</span><span class="s2">&quot;VerifiableCredential&quot;</span>,<span class="w"> </span><span class="s2">&quot;LegalPersonCredential&quot;</span><span class="o">]</span>
</span><span id="__span-24-86"><a id="__codelineno-24-86" name="__codelineno-24-86" href="#__codelineno-24-86"></a><span class="o">}</span>
</span><span id="__span-24-87"><a id="__codelineno-24-87" name="__codelineno-24-87" href="#__codelineno-24-87"></a>MarketplaceUserCredential.json:<span class="w"> </span><span class="p">|</span>
</span><span id="__span-24-88"><a id="__codelineno-24-88" name="__codelineno-24-88" href="#__codelineno-24-88"></a><span class="o">{</span>
</span><span id="__span-24-89"><a id="__codelineno-24-89" name="__codelineno-24-89" href="#__codelineno-24-89"></a><span class="s2">&quot;@context&quot;</span>:<span class="w"> </span><span class="o">[</span><span class="s2">&quot;https://www.w3.org/2018/credentials/v1&quot;</span><span class="o">]</span>,
</span><span id="__span-24-90"><a id="__codelineno-24-90" name="__codelineno-24-90" href="#__codelineno-24-90"></a><span class="s2">&quot;credentialSchema&quot;</span>:<span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-91"><a id="__codelineno-24-91" name="__codelineno-24-91" href="#__codelineno-24-91"></a><span class="s2">&quot;id&quot;</span>:
</span><span id="__span-24-92"><a id="__codelineno-24-92" name="__codelineno-24-92" href="#__codelineno-24-92"></a><span class="s2">&quot;https://raw.githubusercontent.com/FIWARE-Ops/tech-x-challenge/main/schema.j</span>
</span><span id="__span-24-93"><a id="__codelineno-24-93" name="__codelineno-24-93" href="#__codelineno-24-93"></a><span class="s2">son&quot;</span>,
</span><span id="__span-24-94"><a id="__codelineno-24-94" name="__codelineno-24-94" href="#__codelineno-24-94"></a><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;FullJsonSchemaValidator2021&quot;</span>
</span><span id="__span-24-95"><a id="__codelineno-24-95" name="__codelineno-24-95" href="#__codelineno-24-95"></a><span class="o">}</span>,
</span><span id="__span-24-96"><a id="__codelineno-24-96" name="__codelineno-24-96" href="#__codelineno-24-96"></a><span class="s2">&quot;credentialSubject&quot;</span>:<span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-97"><a id="__codelineno-24-97" name="__codelineno-24-97" href="#__codelineno-24-97"></a><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;gx:NaturalParticipant&quot;</span>,
</span><span id="__span-24-98"><a id="__codelineno-24-98" name="__codelineno-24-98" href="#__codelineno-24-98"></a><span class="s2">&quot;email&quot;</span>:<span class="w"> </span><span class="s2">&quot;normal-user@fiware.org&quot;</span>,
</span><span id="__span-24-99"><a id="__codelineno-24-99" name="__codelineno-24-99" href="#__codelineno-24-99"></a><span class="s2">&quot;familyName&quot;</span>:<span class="w"> </span><span class="s2">&quot;IPS&quot;</span>,
</span><span id="__span-24-100"><a id="__codelineno-24-100" name="__codelineno-24-100" href="#__codelineno-24-100"></a><span class="s2">&quot;firstName&quot;</span>:<span class="w"> </span><span class="s2">&quot;employee&quot;</span>,
</span><span id="__span-24-101"><a id="__codelineno-24-101" name="__codelineno-24-101" href="#__codelineno-24-101"></a><span class="s2">&quot;lastName&quot;</span>:<span class="w"> </span><span class="s2">&quot;IPS&quot;</span>,
</span><span id="__span-24-102"><a id="__codelineno-24-102" name="__codelineno-24-102" href="#__codelineno-24-102"></a><span class="s2">&quot;roles&quot;</span>:<span class="w"> </span><span class="o">[{</span>
</span><span id="__span-24-103"><a id="__codelineno-24-103" name="__codelineno-24-103" href="#__codelineno-24-103"></a><span class="s2">&quot;names&quot;</span>:<span class="w"> </span><span class="o">[</span><span class="s2">&quot;LEGAL_REPRESENTATIVE&quot;</span><span class="o">]</span>,
</span><span id="__span-24-104"><a id="__codelineno-24-104" name="__codelineno-24-104" href="#__codelineno-24-104"></a><span class="s2">&quot;target&quot;</span>:<span class="w"> </span><span class="s2">&quot;did:web:onboarding&quot;</span>
</span><span id="__span-24-105"><a id="__codelineno-24-105" name="__codelineno-24-105" href="#__codelineno-24-105"></a><span class="o">}]</span>
</span><span id="__span-24-106"><a id="__codelineno-24-106" name="__codelineno-24-106" href="#__codelineno-24-106"></a><span class="o">}</span>,
</span><span id="__span-24-107"><a id="__codelineno-24-107" name="__codelineno-24-107" href="#__codelineno-24-107"></a><span class="s2">&quot;id&quot;</span>:<span class="w"> </span><span class="s2">&quot;urn:uuid:3add94f4-28ec-42a1-8704-4e4aa51006b4&quot;</span>,
</span><span id="__span-24-108"><a id="__codelineno-24-108" name="__codelineno-24-108" href="#__codelineno-24-108"></a><span class="s2">&quot;issued&quot;</span>:<span class="w"> </span><span class="s2">&quot;2021-08-31T00:00:00Z&quot;</span>,
</span><span id="__span-24-109"><a id="__codelineno-24-109" name="__codelineno-24-109" href="#__codelineno-24-109"></a><span class="s2">&quot;issuer&quot;</span>:<span class="w"> </span><span class="s2">&quot;did:ebsi:2A9BZ9SUe6BatacSpvs1V5CdjHvLpQ7bEsi2Jb6LdHKnQxaN&quot;</span>,
</span><span id="__span-24-110"><a id="__codelineno-24-110" name="__codelineno-24-110" href="#__codelineno-24-110"></a><span class="s2">&quot;validFrom&quot;</span>:<span class="w"> </span><span class="s2">&quot;2021-08-31T00:00:00Z&quot;</span>,
</span><span id="__span-24-111"><a id="__codelineno-24-111" name="__codelineno-24-111" href="#__codelineno-24-111"></a><span class="s2">&quot;issuanceDate&quot;</span>:<span class="w"> </span><span class="s2">&quot;2021-08-31T00:00:00Z&quot;</span>,
</span><span id="__span-24-112"><a id="__codelineno-24-112" name="__codelineno-24-112" href="#__codelineno-24-112"></a><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="o">[</span><span class="s2">&quot;MarketplaceUserCredential&quot;</span><span class="o">]</span>
</span><span id="__span-24-113"><a id="__codelineno-24-113" name="__codelineno-24-113" href="#__codelineno-24-113"></a><span class="o">}</span>
</span><span id="__span-24-114"><a id="__codelineno-24-114" name="__codelineno-24-114" href="#__codelineno-24-114"></a>EmployeeCredential.json:<span class="w"> </span><span class="p">|</span>
</span><span id="__span-24-115"><a id="__codelineno-24-115" name="__codelineno-24-115" href="#__codelineno-24-115"></a><span class="o">{</span>
</span><span id="__span-24-116"><a id="__codelineno-24-116" name="__codelineno-24-116" href="#__codelineno-24-116"></a><span class="s2">&quot;@context&quot;</span>:<span class="w"> </span><span class="o">[</span><span class="s2">&quot;https://www.w3.org/2018/credentials/v1&quot;</span><span class="o">]</span>,
</span><span id="__span-24-117"><a id="__codelineno-24-117" name="__codelineno-24-117" href="#__codelineno-24-117"></a><span class="s2">&quot;credentialSchema&quot;</span>:<span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-118"><a id="__codelineno-24-118" name="__codelineno-24-118" href="#__codelineno-24-118"></a><span class="s2">&quot;id&quot;</span>:
</span><span id="__span-24-119"><a id="__codelineno-24-119" name="__codelineno-24-119" href="#__codelineno-24-119"></a><span class="s2">&quot;https://raw.githubusercontent.com/FIWARE-Ops/tech-x-challenge/main/schema.j</span>
</span><span id="__span-24-120"><a id="__codelineno-24-120" name="__codelineno-24-120" href="#__codelineno-24-120"></a><span class="s2">son&quot;</span>,
</span><span id="__span-24-121"><a id="__codelineno-24-121" name="__codelineno-24-121" href="#__codelineno-24-121"></a><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;FullJsonSchemaValidator2021&quot;</span>
</span><span id="__span-24-122"><a id="__codelineno-24-122" name="__codelineno-24-122" href="#__codelineno-24-122"></a><span class="o">}</span>,
</span><span id="__span-24-123"><a id="__codelineno-24-123" name="__codelineno-24-123" href="#__codelineno-24-123"></a><span class="s2">&quot;credentialSubject&quot;</span>:<span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-124"><a id="__codelineno-24-124" name="__codelineno-24-124" href="#__codelineno-24-124"></a><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;gx:NaturalParticipant&quot;</span>,
</span><span id="__span-24-125"><a id="__codelineno-24-125" name="__codelineno-24-125" href="#__codelineno-24-125"></a><span class="s2">&quot;email&quot;</span>:<span class="w"> </span><span class="s2">&quot;normal-user@fiware.org&quot;</span>,
</span><span id="__span-24-126"><a id="__codelineno-24-126" name="__codelineno-24-126" href="#__codelineno-24-126"></a><span class="s2">&quot;familyName&quot;</span>:<span class="w"> </span><span class="s2">&quot;IPS&quot;</span>,
</span><span id="__span-24-127"><a id="__codelineno-24-127" name="__codelineno-24-127" href="#__codelineno-24-127"></a><span class="s2">&quot;firstName&quot;</span>:<span class="w"> </span><span class="s2">&quot;employee&quot;</span>,
</span><span id="__span-24-128"><a id="__codelineno-24-128" name="__codelineno-24-128" href="#__codelineno-24-128"></a><span class="s2">&quot;lastName&quot;</span>:<span class="w"> </span><span class="s2">&quot;IPS&quot;</span>,
</span><span id="__span-24-129"><a id="__codelineno-24-129" name="__codelineno-24-129" href="#__codelineno-24-129"></a><span class="s2">&quot;roles&quot;</span>:<span class="w"> </span><span class="o">[{</span>
</span><span id="__span-24-130"><a id="__codelineno-24-130" name="__codelineno-24-130" href="#__codelineno-24-130"></a><span class="s2">&quot;names&quot;</span>:<span class="w"> </span><span class="o">[</span><span class="s2">&quot;LEGAL_REPRESENTATIVE&quot;</span><span class="o">]</span>,
</span><span id="__span-24-131"><a id="__codelineno-24-131" name="__codelineno-24-131" href="#__codelineno-24-131"></a><span class="s2">&quot;target&quot;</span>:<span class="w"> </span><span class="s2">&quot;did:web:onboarding&quot;</span>
</span><span id="__span-24-132"><a id="__codelineno-24-132" name="__codelineno-24-132" href="#__codelineno-24-132"></a><span class="o">}]</span>
</span><span id="__span-24-133"><a id="__codelineno-24-133" name="__codelineno-24-133" href="#__codelineno-24-133"></a><span class="o">}</span>,
</span><span id="__span-24-134"><a id="__codelineno-24-134" name="__codelineno-24-134" href="#__codelineno-24-134"></a><span class="s2">&quot;id&quot;</span>:<span class="w"> </span><span class="s2">&quot;urn:uuid:3add94f4-28ec-42a1-8704-4e4aa51006b4&quot;</span>,
</span><span id="__span-24-135"><a id="__codelineno-24-135" name="__codelineno-24-135" href="#__codelineno-24-135"></a><span class="s2">&quot;issued&quot;</span>:<span class="w"> </span><span class="s2">&quot;2021-08-31T00:00:00Z&quot;</span>,
</span><span id="__span-24-136"><a id="__codelineno-24-136" name="__codelineno-24-136" href="#__codelineno-24-136"></a><span class="s2">&quot;issuer&quot;</span>:<span class="w"> </span><span class="s2">&quot;did:ebsi:2A9BZ9SUe6BatacSpvs1V5CdjHvLpQ7bEsi2Jb6LdHKnQxaN&quot;</span>,
</span><span id="__span-24-137"><a id="__codelineno-24-137" name="__codelineno-24-137" href="#__codelineno-24-137"></a><span class="s2">&quot;validFrom&quot;</span>:<span class="w"> </span><span class="s2">&quot;2021-08-31T00:00:00Z&quot;</span>,
</span><span id="__span-24-138"><a id="__codelineno-24-138" name="__codelineno-24-138" href="#__codelineno-24-138"></a><span class="s2">&quot;issuanceDate&quot;</span>:<span class="w"> </span><span class="s2">&quot;2021-08-31T00:00:00Z&quot;</span>,
</span><span id="__span-24-139"><a id="__codelineno-24-139" name="__codelineno-24-139" href="#__codelineno-24-139"></a><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="o">[</span><span class="s2">&quot;EmployeeCredential&quot;</span><span class="o">]</span>
</span><span id="__span-24-140"><a id="__codelineno-24-140" name="__codelineno-24-140" href="#__codelineno-24-140"></a><span class="o">}</span>
</span></code></pre></div>
<h3 id="required-secrets">Required secrets</h3>
<p>During the connector deployment process, we are required to have a number of secrets created in our Kubernetes namespaces.</p>
<p>Some of these secrets contain the credentials that we are going to assign to certain services during their creation, so we will have to create them manually before starting the deployment. These secrets are:</p>
<figure>
<p><img alt="Required secrets" loading="lazy" src="../img/aws/required_secrets.png" /></p>
</figure>
<p>Example of a file to define a secret:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>apiVersion:<span class="w"> </span>v1
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>kind:<span class="w"> </span>Secret
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>metadata:
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="w">  </span>name:<span class="w"> </span>mysql-secret
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="w">  </span>namespace:<span class="w"> </span>pdc
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>type:<span class="w"> </span>Opaque
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>data:
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="w">    </span>dbPassword:<span class="w"> </span><span class="nv">YWRtaW4</span><span class="o">=</span>
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span class="w">    </span>mysql-password:<span class="w"> </span><span class="nv">YWRtaW4</span><span class="o">=</span>
</span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="w">    </span>mysql-replication-password:<span class="w"> </span><span class="nv">YWRtaW4</span><span class="o">=</span>
</span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a><span class="w">    </span>mysql-root-password:<span class="w"> </span><span class="nv">YWRtaW4</span><span class="o">=</span>
</span></code></pre></div>
<p>As we can see, the assigned values must be in base 64. In this case, all fields have been assigned the value "admin" in base 64.</p>
<p>Another secret referred to in the values.yaml is the pdc-vcwaltid-tls-sec secret. This secret contains the TLS certificate of the VCWaltid component and should be created automatically during deployment, as long as our Cluster Issuer is working properly and obtaining the certificates for our services.</p>
<h3 id="ds-connector-installation">DS Connector installation</h3>
<p>After creating the necessary secrets and setting the necessary parameters in the values.yaml file, we can move on to deploying the connector:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="c1"># Install from Helm repo</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>helm<span class="w"> </span>install<span class="w"> </span>pdc<span class="w"> </span>dsc/data-space-connector<span class="w"> </span>-n<span class="w"> </span>&lt;Namespace&gt;<span class="w"> </span>-f<span class="w"> </span>values.yaml
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="c1"># Isstall from source code </span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>helm<span class="w"> </span>install<span class="w"> </span>pdc<span class="w"> </span>&lt;PATH_TO_RELEASE&gt;/data-space-connector<span class="w"> </span>-n<span class="w"> </span>&lt;Namespace&gt;<span class="w"> </span>-f<span class="w"> </span>values.yaml
</span></code></pre></div>
<p>We can check if the connector has been deployed correctly by running:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>kubectl<span class="w"> </span>get<span class="w"> </span>all<span class="w"> </span>-n<span class="w"> </span>&lt;Namespace&gt;
</span></code></pre></div>
<figure>
<p><img alt="Pods" loading="lazy" src="../img/aws/pods.png" /></p>
</figure>
<h3 id="access-routes">Access routes</h3>
<table>
<thead>
<tr>
<th><strong>Aplicación</strong></th>
<th>URL</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td>Keycloack de nuestro Package Delivery Co.</td>
<td><a href="https://keycloak-pdc-demo.ds.smartcity-marketplace.com/realms/fiware-server/account/#/">https://keycloak-pdc-demo.ds.smartcity-marketplace.com/realms/fiware-server/account/#/</a></td>
<td>Keycloak to obtain Verifiable Credentials. Username and password: legal-representative</td>
</tr>
<tr>
<td>Wallet</td>
<td><a href="https://demo-wallet.fiware.dev/">https://demo-wallet.fiware.dev/</a></td>
<td>To scan QRs and obtain credentials via a smartphone</td>
</tr>
<tr>
<td>Onboarding Portal</td>
<td><a href="https://onboarding-portal.dsba.fiware.dev/">https://onboarding-portal.dsba.fiware.dev</a></td>
<td>To register to the FIWARE Demo Data Space</td>
</tr>
<tr>
<td>Marketplace</td>
<td><a href="https://marketplace.dsba.fiware.dev/">https://marketplace.dsba.fiware.dev</a></td>
<td>Acceder al marketplace del Demo Data Space de FIWARE</td>
</tr>
</tbody>
</table>
<p>Details about the onboarding process in the Data Space and access to the Marketplace:
<a href="https://github.com/DOME-Marketplace/dome-gitops/blob/main/doc/DEMO.md">https://github.com/DOME-Marketplace/dome-gitops/blob/main/doc/DEMO.md</a></p>
<h2 id="kubectl-cheat-sheet">Kubectl Cheat Sheet</h2>
<p>Create or delete a namespace:</p>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="c1"># Create</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>kubectl<span class="w"> </span>create<span class="w"> </span>ns<span class="w"> </span>&lt;Namespace&gt;
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="c1"># Delete</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>kubectl<span class="w"> </span>delete<span class="w"> </span>ns<span class="w"> </span>&lt;Namespace&gt;
</span></code></pre></div>
<strong>Note:</strong> When the connector deployment fails, the quickest option is to delete the namespace and recreate it. Then re-create the secrets and start the deployment with helm.</p>
<p>Create a resource via a file:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>&lt;FILE.YAML&gt;
</span></code></pre></div>
<p>Check the resources deployed in a namespace:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="c1"># Get Pods</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>&lt;Namespace&gt;
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="c1"># Get services</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>kubectl<span class="w"> </span>get<span class="w"> </span>services<span class="w"> </span>-n<span class="w"> </span>&lt;Namespace&gt;
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="c1"># Get jobs </span>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>kubectl<span class="w"> </span>get<span class="w"> </span><span class="nb">jobs</span><span class="w"> </span>-n<span class="w"> </span>&lt;Namespace&gt;
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="c1"># Get routes</span>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>kubectl<span class="w"> </span>get<span class="w"> </span>routes<span class="w"> </span>-n<span class="w"> </span>&lt;Namespace&gt;
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="c1"># Get secrets</span>
</span><span id="__span-31-10"><a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a>kubectl<span class="w"> </span>get<span class="w"> </span>secrets<span class="w"> </span>-n<span class="w"> </span>&lt;Namespace&gt;
</span><span id="__span-31-11"><a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a><span class="c1"># Get certificates</span>
</span><span id="__span-31-12"><a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a>kubectl<span class="w"> </span>get<span class="w"> </span>certificates<span class="w"> </span>-n<span class="w"> </span>&lt;Namespace&gt;
</span><span id="__span-31-13"><a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a><span class="c1"># ...</span>
</span><span id="__span-31-14"><a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a><span class="c1"># Get all</span>
</span><span id="__span-31-15"><a id="__codelineno-31-15" name="__codelineno-31-15" href="#__codelineno-31-15"></a>kubectl<span class="w"> </span>get<span class="w"> </span>all<span class="w"> </span>-n<span class="w"> </span>&lt;Namespace&gt;
</span></code></pre></div>
<p>Check resources at cluster level:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c1"># Get Cluster Issuers list</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>kubectl<span class="w"> </span>get<span class="w"> </span>clusterissuer
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="c1"># Get External DNS list</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>kubectl<span class="w"> </span>get<span class="w"> </span>externaldns
</span></code></pre></div>
<p>Describe a resource (to see errors when the resource is not displayed correctly):</p>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>kubectl<span class="w"> </span>describe<span class="w"> </span>&lt;Resource_type&gt;<span class="w"> </span>&lt;Resource_name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;Namespace&gt;
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="c1"># Example</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>kubectl<span class="w"> </span>describe<span class="w"> </span>pod<span class="w"> </span>keyrock-pdc-0<span class="w"> </span>-n<span class="w"> </span>pdc
</span></code></pre></div>
View logs of a pod (usually to see application errors after deployment):
<div class="language-bash highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>kubectl<span class="w"> </span>logs<span class="w"> </span>&lt;Pod_name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;Namespace&gt;
</span></code></pre></div></p>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="the-ssl-secret-associated-with-vcwaltid-service-is-not-found">The SSL secret associated with VCWaltid service is not found</h3>
<p>TLS certificates are created as Kubernetes secrets for the components seen in section <a href="#routes-and-certificates-in-fiware-ds-connector">Routes and certificates in FIWARE DS Connector</a>, but if these secrets are not being created automatically, the deployment will fail.</p>
<p>The indicator that this is happening will be found when doing the <strong>kubectl describe</strong> of one of these components: Keycloak, Keyrock or dsba-pdp. This is because these components have to directly access the TLS secret created for the VCWaltid service, so an error will appear indicating that the <strong>pdc-vcwaltid-tls-sec</strong> secret has not been found in the environment.</p>
<p>We have encountered this error in two cases:</p>
<ul>
<li>When the Cluster Issuer to obtain certificates from Let's Encrypt was not working correctly. That is, when the configuration described in section <a href="#domains-routes-and-certificates">Domains, routes and Certificates</a> had not been completed correctly.</li>
</ul>
<p><strong>Solution:</strong> Check that all the resources for obtaining TLS certificates are working correctly: CertManager, External DNS and CertUtils. Also check that the domain created in Route53 belongs to us and has been correctly configured in its issuing location with the name servers indicated by AWS.</p>
<ul>
<li>When the number of requests to Let's Encrypt for the same domain is exceeded. If we exceed 5 requests for the same domain in the same week (this would be deploying the connector 5 times in the same week).</li>
</ul>
<p><strong>Solution:</strong> Rename the subdomains to have another 5 attempts. Ideally, use the ClusterIssuer self-signed until you are sure that there are no other errors in the values.yaml. Once we know it works, switch to Let's Encrypt's ClusterIsssuer (letsencrypt-prod).</p>
<h3 id="timed-out-waiting-for-the-condition">Timed out waiting for the condition</h3>
<p>If the installation with Helm does not finish successfully and you get a "Timed out waiting for the condition" error, it is possible that this is due to the following race condition between Keyrock and MySQL.</p>
<p>During Keyrock deployment, the MySQL instance (initData section in values.yaml) is accessed. This MySQL instance has to be fully deployed for Keyrock to access it, which is not always the case. Keyrock makes 5 attempts (I tried to increase this but I didn't know how) and if it fails to access MySQL, it ends with an error.</p>
<figure>
<p><img alt="Timed out" loading="lazy" src="../img/aws/time_out_1.png" /></p>
</figure>
<p>No particular solution to this problem has been found, other than to try deploying again from scratch. Usually, by the fifth attempt the MySQL component is ready and the Keyrock can finish successfully, but sometimes it can take a bit longer and for that reason the whole deployment fails.</p>
<figure>
<p><img alt="Timed out" loading="lazy" src="../img/aws/time_out_2.png" /></p>
</figure>
<p>Before learning that the reason for this failure was due to a race condition, the following change was made to the code in the initData section of Keycloack in values.yaml:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="nt">Before</span><span class="p">:</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="w">    </span><span class="c1"># Init data</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="w">    </span><span class="nt">initData</span><span class="p">:</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="w">      </span><span class="nt">initEnabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="w">      </span><span class="nt">backoffLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">quay.io/wi_stefan/mysql:5.7</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="nt">After</span><span class="p">:</span>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="w">    </span><span class="c1"># Init data</span>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="w">    </span><span class="nt">initData</span><span class="p">:</span>
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="w">      </span><span class="nt">initEnabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a><span class="w">      </span><span class="nt">hook</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">post-install</span>
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a><span class="w">      </span><span class="nt">backoffLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
</span></code></pre></div>
<p>It might seem that the key is in the backoffLimit parameter, but the first thing that was tried was to increase this parameter. Changing this alone did not fix the problem.</p>
<h3 id="gaiaxparticipantcredential-context">GaiaXParticipantCredential context</h3>
<p>In the default values.yaml example for the Packaging Delivery Co. deployment, there is an error when defining the context of the GaiaXParticipantCredential.json in the VCWaltid component.</p>
<p>Because of this error, QRs of type GaiaXParticipantCredential could not be read with the demo-wallet.</p>
<p>The URL used was:
<a href="https://registry.lab.dsba.eu/development/api/trusted-shape-registry/v1/shapes/jsonld/trustframework#">https://registry.lab.dsba.eu/development/api/trusted-shape-registry/v1/shapes/jsonld/trustframework#</a>
Changed to:
<a href="https://registry.lab.geia-x.eu/development/api/trusted-shape-registry/v1/shapes/jsonld/trustframework">https://registry.lab.geia-x.eu/development/api/trusted-shape-registry/v1/shapes/jsonld/trustframework#</a></p>
<h2 id="sources">Sources</h2>
<ul>
<li><a href="https://github.com/FIWARE/data-space-connector">FIWARE Data Space Connector, FIWARE</a></li>
<li><a href="https://github.com/FIWARE-Ops/data-space-connector">FIWARE Data Space Connector, FIWARE Ops</a></li>
<li><a href="https://github.com/FIWARE-Ops/fiware-gitops/tree/master/aws/dsba">Demo-Setup DSBA-compliant Dataspace, FIWARE Ops</a></li>
<li><a href="https://github.com/FIWARE-Ops/fiware-gitops/blob/master/doc/ROUTES.md">Routes &amp; Certs, FIWARE Ops</a></li>
<li><a href="https://youtu.be/amLN6-JxygU?feature=shared">ROSA Build - 30 mins to build a Red Hat OpenShift Service on AWS Cloud by Yongkang</a></li>
<li><a href="https://docs.openshift.com/rosa/rosa_install_access_delete_clusters/rosa_getting_started_iam/rosa-required-aws-service-quotas.html">Required AWS service quotas, Red Halt Openshift</a></li>
</ul>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-09-04T12:06:11+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-09-04</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-02-09T11:05:42+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-02-09</span>
  </span>

    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Contributors">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 5.5A3.5 3.5 0 0 1 15.5 9a3.5 3.5 0 0 1-3.5 3.5A3.5 3.5 0 0 1 8.5 9 3.5 3.5 0 0 1 12 5.5M5 8c.56 0 1.08.15 1.53.42-.15 1.43.27 2.85 1.13 3.96C7.16 13.34 6.16 14 5 14a3 3 0 0 1-3-3 3 3 0 0 1 3-3m14 0a3 3 0 0 1 3 3 3 3 0 0 1-3 3c-1.16 0-2.16-.66-2.66-1.62a5.536 5.536 0 0 0 1.13-3.96c.45-.27.97-.42 1.53-.42M5.5 18.25c0-2.07 2.91-3.75 6.5-3.75s6.5 1.68 6.5 3.75V20h-13v-1.75M0 20v-1.5c0-1.39 1.89-2.56 4.45-2.9-.59.68-.95 1.62-.95 2.65V20H0m24 0h-3.5v-1.75c0-1.03-.36-1.97-.95-2.65 2.56.34 4.45 1.51 4.45 2.9V20Z"/></svg>
      
    </span>
    <nav>
      Joan Ciprià, Sergio Marti
    </nav>
  </span>

    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../" class="md-footer__link md-footer__link--prev" aria-label="Previous: Legacy version 1.X.X">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Legacy version 1.X.X
              </div>
            </div>
          </a>
        
        
          
          <a href="../local_deployment/" class="md-footer__link md-footer__link--next" aria-label="Next: Local deployment">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Local deployment
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="footer-container">
    <div class="footer-column">
        <h4 style="margin-top: 0;">Organization</h4>
        <div class="footer-logo" style="display: flex; align-items: center;">
            <a href="https://citcom.ai/" target="_blank">
                <img class="citcom-logo" src="/assets/citcom.svg" alt="CitCom.ai logo">
            </a>
            <a href="https://vrain.upv.es/" target="_blank">
                <img class="vrain-logo" src="/assets/vrain_white.png" alt="VRAIN logo">
            </a>
        </div>

    </div>
    <div class="footer-column">
        <div class="footer-tagline">
            <h4 style="margin: 0;">Co-funded by</h4>
            <div class="logo-container" style="display: flex; align-items: center;">
                <img src="/assets/eu-co-funded.png" alt="EU Logo">
                <img src="/assets/gva.png" alt="GVA Logo">
            </div>
            <p>
                Views and opinions expressed are however those of the author(s)
                only and do not necessarily reflect those of the European Union. Neither the European Union nor the
                granting authority can be held responsible for them.
            </p>
        </div>
    </div>
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../../../..", "features": ["content.code.copy", "content.action.edit", "navigation.sections", "navigation.footer", "navigation.indexes"], "search": "../../../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../../../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
        <script src="../../../../../../js/timeago.min.js"></script>
      
        <script src="../../../../../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../../../../../assets/js/data_catalog.js"></script>
      
    
  </body>
</html>